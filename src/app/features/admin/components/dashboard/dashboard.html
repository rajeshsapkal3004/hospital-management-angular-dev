<div class="dashboard-container">
  <!-- Welcome Section -->
  <div class="welcome-section">
    <div class="welcome-content">
      <h1 class="welcome-title">{{ getUserWelcomeMessage() }}</h1>
      <p class="welcome-subtitle">Here's what's happening at your hospital today</p>
    </div>
    <button mat-raised-button color="primary" (click)="refreshDashboard()" class="refresh-btn">
      <mat-icon aria-hidden="false" fontIcon="refresh"></mat-icon>
      Refresh
    </button>
  </div>

  <!-- Stats Grid -->
  <div class="stats-grid" *ngIf="!isLoading">
    <mat-card class="stat-card patients-card">
      <mat-card-content class="stat-content">
        <div class="stat-icon">
          <mat-icon aria-hidden="false" fontIcon="people"></mat-icon>
        </div>
        <div class="stat-info">
          <h3 class="stat-number">{{ dashboardStats.totalPatients | number }}</h3>
          <p class="stat-label">Total Patients</p>
          <span class="stat-change positive">+12 this week</span>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card doctors-card">
      <mat-card-content class="stat-content">
        <div class="stat-icon">
          <mat-icon aria-hidden="false" fontIcon="local_hospital"></mat-icon>
        </div>
        <div class="stat-info">
          <h3 class="stat-number">{{ dashboardStats.totalDoctors | number }}</h3>
          <p class="stat-label">Active Doctors</p>
          <span class="stat-change positive">+3 this month</span>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card appointments-card">
      <mat-card-content class="stat-content">
        <div class="stat-icon">
          <mat-icon aria-hidden="false" fontIcon="event"></mat-icon>
        </div>
        <div class="stat-info">
          <h3 class="stat-number">{{ dashboardStats.todayAppointments | number }}</h3>
          <p class="stat-label">Today's Appointments</p>
          <span class="stat-change neutral">5 pending</span>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card revenue-card">
      <mat-card-content class="stat-content">
        <div class="stat-icon">
          <mat-icon aria-hidden="false" fontIcon="attach_money"></mat-icon>
        </div>
        <div class="stat-info">
          <h3 class="stat-number">{{ formatCurrency(dashboardStats.monthlyRevenue) }}</h3>
          <p class="stat-label">Monthly Revenue</p>
          <span class="stat-change positive">+15% vs last month</span>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card emergency-card">
      <mat-card-content class="stat-content">
        <div class="stat-icon">
          <mat-icon aria-hidden="false" fontIcon="emergency"></mat-icon>
        </div>
        <div class="stat-info">
          <h3 class="stat-number">{{ dashboardStats.emergencyCases | number }}</h3>
          <p class="stat-label">Emergency Cases</p>
          <span class="stat-change neutral">Active now</span>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="stat-card beds-card">
      <mat-card-content class="stat-content">
        <div class="stat-icon">
          <mat-icon aria-hidden="false" fontIcon="hotel"></mat-icon>
        </div>
        <div class="stat-info">
          <h3 class="stat-number">{{ dashboardStats.availableBeds | number }}</h3>
          <p class="stat-label">Available Beds</p>
          <span class="stat-change positive">Out of 50 total</span>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="isLoading">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading dashboard data...</p>
  </div>

  <!-- Quick Actions & Recent Activity -->
  <div class="dashboard-grid" *ngIf="!isLoading">
    <!-- Quick Actions -->
    <mat-card class="section-card">
      <mat-card-header>
        <mat-card-title>Quick Actions</mat-card-title>
        <mat-card-subtitle>Frequently used operations</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="quick-actions-grid">
          <div 
            *ngFor="let action of quickActions" 
            class="quick-action-item"
            [routerLink]="action.route">
            <div class="action-icon" [style.background-color]="action.color">
              <mat-icon aria-hidden="false">{{ action.icon }}</mat-icon>
            </div>
            <div class="action-content">
              <h4 class="action-title">{{ action.title }}</h4>
              <p class="action-description">{{ action.description }}</p>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Recent Activity -->
    <mat-card class="section-card">
      <mat-card-header>
        <mat-card-title>Recent Activity</mat-card-title>
        <mat-card-subtitle>Latest system updates</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="activity-list">
          <div *ngFor="let activity of recentActivities" class="activity-item">
            <div class="activity-icon">
              <mat-icon aria-hidden="false">{{ getActivityIcon(activity)}}</mat-icon>
            </div>
            <div class="activity-content">
              <h4 class="activity-title">{{ activity.title }}</h4>
              <p class="activity-description">{{ activity.description }}</p>
              <span class="activity-time">{{getActivityTime(activity.timestamp)}}</span>
            </div>
          </div>
        </div>
        <div class="activity-footer">
          <button mat-button color="primary">View All Activities</button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
